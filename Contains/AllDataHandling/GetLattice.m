function ring=GetLattice(AM)

  quad_QP1 = AM.Data.quad_QP1(:,2);
  quad_QP2 = AM.Data.quad_QP2(:,2);
  quad_QP3 = AM.Data.quad_QP3(:,2);
  quad_QP4 = AM.Data.quad_QP4(:,2);
  quad_QP31 = AM.Data.quad_QP31(:,2);
  quad_QP41 = AM.Data.quad_QP41(:,2);

%   sext_SX1 = AM.Data.sext_SX1(:,2);
%   sext_SX2 = AM.Data.sext_SX2(:,2);
%   sext_SX3 = AM.Data.sext_SX3(:,2);


ring={...
       atmarker('DEBUT');...
       atmarker('SEPT');...
        atdrift('SD5B',0.74,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD5',0.056345,'Energy',50000000);...
   atquadrupole('QP1',0.15731,quad_QP1(2),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2',0.20269,'Energy',50000000);...
   atquadrupole('QP2',0.15731,quad_QP2(2),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD31',0.7401495,'Energy',50000000);...
        atsbend('BEND',0.296351,0.785398,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0332,'ExitAngle',0.0332,'FullGap',0.03515064,'FringeInt1',0.5,'FringeInt2',0.5,'FringeBendEntrance',3,'FringeBendExit',3,'FringeQuadEntrance',0,'FringeQuadExit',0,'Energy',50000000);...
        atdrift('SD3S2',0.1150545,'Energy',50000000);...
    atsextupole('SX1',1e-06,-325568.1,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD3S',0.071345,'Energy',50000000);...
   atquadrupole('QP31',0.15731,quad_QP31(1),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD3S',0.071345,'Energy',50000000);...
    atsextupole('SX3',1e-06,-8674118.16,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD3S1',0.131345,'Energy',50000000);...
   atquadrupole('QP41',0.15731,quad_QP41(1),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD1S1B',0.056345,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD1S1',0.19,'Energy',50000000);...
    atsextupole('SX2',1e-06,2896110.38,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD1S',0.071345,'Energy',50000000);...
   atquadrupole('QP4',0.15731,quad_QP4(1),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2',0.20269,'Energy',50000000);...
   atquadrupole('QP3',0.15731,quad_QP3(1),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2SB',0.036345,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD2S',0.1850545,'Energy',50000000);...
        atsbend('BEND',0.296351,0.785398,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0332,'ExitAngle',0.0332,'FullGap',0.03515064,'FringeInt1',0.5,'FringeInt2',0.5,'FringeBendEntrance',3,'FringeBendExit',3,'FringeQuadEntrance',0,'FringeQuadExit',0,'Energy',50000000);...
        atdrift('SD0',0.0900545,'Energy',50000000);...
       atmarker('IP');...
        atdrift('SD0',0.0900545,'Energy',50000000);...
        atsbend('BEND',0.296351,0.785398,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0332,'ExitAngle',0.0332,'FullGap',0.03515064,'FringeInt1',0.5,'FringeInt2',0.5,'FringeBendEntrance',3,'FringeBendExit',3,'FringeQuadEntrance',0,'FringeQuadExit',0,'Energy',50000000);...
        atdrift('SD2S',0.1850545,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD2SB',0.036345,'Energy',50000000);...
   atquadrupole('QP3',0.15731,quad_QP3(2),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2',0.20269,'Energy',50000000);...
   atquadrupole('QP4',0.15731,quad_QP4(2),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD1S',0.071345,'Energy',50000000);...
    atsextupole('SX2',1e-06,2896110.38,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD1S1',0.19,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD1S1B',0.056345,'Energy',50000000);...
   atquadrupole('QP41',0.15731,quad_QP41(2),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD3S1',0.131345,'Energy',50000000);...
    atsextupole('SX3',1e-06,-8674118.16,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD3S',0.071345,'Energy',50000000);...
   atquadrupole('QP31',0.15731,quad_QP31(2),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD3S',0.071345,'Energy',50000000);...
    atsextupole('SX1',1e-06,-325568.1,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD3S2',0.1150545,'Energy',50000000);...
        atsbend('BEND',0.296351,0.785398,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0332,'ExitAngle',0.0332,'FullGap',0.03515064,'FringeInt1',0.5,'FringeInt2',0.5,'FringeBendEntrance',3,'FringeBendExit',3,'FringeQuadEntrance',0,'FringeQuadExit',0,'Energy',50000000);...
        atdrift('SD31',0.7401495,'Energy',50000000);...
   atquadrupole('QP2',0.15731,quad_QP2(3),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2',0.20269,'Energy',50000000);...
   atquadrupole('QP1',0.15731,quad_QP1(3),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD5',0.056345,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD5B',0.74,'Energy',50000000);...
     atrfcavity('RF',0,300000,500023113.724596,30,50000000);...
        atdrift('SD5B',0.74,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD5',0.056345,'Energy',50000000);...
   atquadrupole('QP1',0.15731,quad_QP1(4),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2',0.20269,'Energy',50000000);...
   atquadrupole('QP2',0.15731,quad_QP2(4),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD31',0.7401495,'Energy',50000000);...
        atsbend('BEND',0.296351,0.785398,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0332,'ExitAngle',0.0332,'FullGap',0.03515064,'FringeInt1',0.5,'FringeInt2',0.5,'FringeBendEntrance',3,'FringeBendExit',3,'FringeQuadEntrance',0,'FringeQuadExit',0,'Energy',50000000);...
        atdrift('SD3S2',0.1150545,'Energy',50000000);...
    atsextupole('SX1',1e-06,-325568.1,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD3S',0.071345,'Energy',50000000);...
   atquadrupole('QP31',0.15731,quad_QP31(3),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD3S',0.071345,'Energy',50000000);...
    atsextupole('SX3',1e-06,-8674118.16,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD3S1',0.131345,'Energy',50000000);...
   atquadrupole('QP41',0.15731,quad_QP41(3),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD1S1B',0.056345,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD1S1',0.19,'Energy',50000000);...
    atsextupole('SX2',1e-06,2896110.38,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD1S',0.071345,'Energy',50000000);...
   atquadrupole('QP4',0.15731,quad_QP4(3),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2',0.20269,'Energy',50000000);...
   atquadrupole('QP3',0.15731,quad_QP3(3),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2SB',0.036345,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD2S',0.1850545,'Energy',50000000);...
        atsbend('BEND',0.296351,0.785398,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0332,'ExitAngle',0.0332,'FullGap',0.03515064,'FringeInt1',0.5,'FringeInt2',0.5,'FringeBendEntrance',3,'FringeBendExit',3,'FringeQuadEntrance',0,'FringeQuadExit',0,'Energy',50000000);...
        atdrift('SD0',0.0900545,'Energy',50000000);...
        atdrift('SD0',0.0900545,'Energy',50000000);...
        atsbend('BEND',0.296351,0.785398,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0332,'ExitAngle',0.0332,'FullGap',0.03515064,'FringeInt1',0.5,'FringeInt2',0.5,'FringeBendEntrance',3,'FringeBendExit',3,'FringeQuadEntrance',0,'FringeQuadExit',0,'Energy',50000000);...
        atdrift('SD2S',0.1850545,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD2SB',0.036345,'Energy',50000000);...
   atquadrupole('QP3',0.15731,quad_QP3(4),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2',0.20269,'Energy',50000000);...
   atquadrupole('QP4',0.15731,quad_QP4(4),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD1S',0.071345,'Energy',50000000);...
    atsextupole('SX2',1e-06,2896110.38,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD1S1',0.19,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD1S1B',0.056345,'Energy',50000000);...
   atquadrupole('QP41',0.15731,quad_QP41(4),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD3S1',0.131345,'Energy',50000000);...
    atsextupole('SX3',1e-06,-8674118.16,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD3S',0.071345,'Energy',50000000);...
   atquadrupole('QP31',0.15731,quad_QP31(4),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD3S',0.071345,'Energy',50000000);...
    atsextupole('SX1',1e-06,-325568.1,'Energy',50000000);...
    atcorrector('HCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
    atcorrector('VCOR',1e-06,[0 0],'PolynomA',0,'PolynomB',0,'NumIntSteps',1,'MaxOrder',1,'Energy',50000000,'Roll',[0 0]);...
        atdrift('SD3S2',0.1150545,'Energy',50000000);...
        atsbend('BEND',0.296351,0.785398,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0332,'ExitAngle',0.0332,'FullGap',0.03515064,'FringeInt1',0.5,'FringeInt2',0.5,'FringeBendEntrance',3,'FringeBendExit',3,'FringeQuadEntrance',0,'FringeQuadExit',0,'Energy',50000000);...
% the parameters form file started from heare
        atdrift('SD31',0.7401495,'Energy',50000000);...
   atquadrupole('QP2',0.15731,quad_QP2(1),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD2',0.20269,'Energy',50000000);...
   atquadrupole('QP1',0.15731,quad_QP1(1),'StrMPoleSymplectic4Pass','Energy',50000000);...
        atdrift('SD5',0.056345,'Energy',50000000);...
       atmarker('BPMx','GCR',[1 1 0 0]);...
       atmonitor('BPMz');...
        atdrift('SD5B',0.74,'Energy',50000000);...
       atmarker('FIN');...
};
end
